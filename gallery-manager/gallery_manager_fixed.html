<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–Ω–µ–¥–∂–µ—Ä –≥–∞–ª–µ—Ä–µ–∏ "–ù–∞–ø–æ–º–∏–Ω–∞–ª–æ—á–∫–∞" - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .file-upload {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .file-upload input {
            display: none;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 5px;
            transition: transform 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .gallery-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .preview {
            margin: 20px 0;
        }

        .preview img,
        .preview video {
            max-width: 150px;
            max-height: 150px;
            border-radius: 10px;
            margin: 5px;
        }

        .error {
            color: #e74c3c;
            background: #ffeaea;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .success {
            color: #27ae60;
            background: #eafaf1;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíñ –ú–µ–Ω–µ–¥–∂–µ—Ä –≥–∞–ª–µ—Ä–µ–∏ "–ù–∞–ø–æ–º–∏–Ω–∞–ª–æ—á–∫–∞"</h1>
            <p>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</p>
        </div>

        <div class="section">
            <h2>üñºÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤</h2>
            
            <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                <p>üìÅ –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤</p>
                <p style="color: #666; font-size: 0.9rem;">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: JPG, PNG, MP4, MOV</p>
                <input type="file" id="fileInput" multiple accept="image/*,video/*" onchange="handleFileSelect(event)">
            </div>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
            <div style="text-align: center; margin: 10px 0;">
                <button class="btn" onclick="selectFiles('image/*')">üì∑ –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</button>
                <button class="btn" onclick="selectFiles('video/*')">üé¨ –í—ã–±—Ä–∞—Ç—å –≤–∏–¥–µ–æ</button>
                <button class="btn" onclick="testBrowser()">üîß –¢–µ—Å—Ç –±—Ä–∞—É–∑–µ—Ä–∞</button>
            </div>

            <div id="filePreview" class="preview"></div>

            <div class="form-group">
                <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
                <input type="text" id="title" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: üíï –ù–∞—à–∞ –ø–µ—Ä–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞">
            </div>

            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="description" placeholder="–î–æ–±–∞–≤—å—Ç–µ –∫—Ä–∞—Å–∏–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ..."></textarea>
            </div>

            <button class="btn" onclick="addToGallery()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤ –≥–∞–ª–µ—Ä–µ—é</button>
            <button class="btn btn-danger" onclick="clearFiles()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>

        <div class="section">
            <h2>üìã –ì–∞–ª–µ—Ä–µ—è</h2>
            <div id="galleryList"></div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn" onclick="exportGalleryConfig()">üìÑ –°–∫–∞—á–∞—Ç—å GalleryConfig.java</button>
                <button class="btn" onclick="exportAppTexts()">üìÑ –°–∫–∞—á–∞—Ç—å AppTexts.java</button>
            </div>
        </div>

        <div id="messages"></div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let galleryItems = [];
        let currentFiles = [];
        let mediaFiles = new Map();

        // –¢–µ–∫—Å—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const appTexts = {
            loveMessages: [
                "ü§ç –∫–æ—Ç–∫–Ω–æ—á–µ–∫ –º–æ–π –ª—é–±–∏–º—ã–π, —Ç—ã —É –º–µ–Ω—è —Å–∞–º–∞—è —Å–∞–º–∞—è!!",
                "üíï –º—ã —Å–æ –≤—Å–µ–º –≤—Å–µ–º —Å–ø—Ä–∞–≤–∏–º—Å—è, —è –∫–ª—è–Ω—É—Å—å!!",
                "üåü —Ç—ã –º–æ—è –æ–≥—Ä–æ–º–Ω–∞—è —É–º–Ω–∏—á–∫–∞ –∏ —è –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π –ø—Ä—è–º!!"
            ],
            missions: [
                ["–£—Ç—Ä–µ–Ω–Ω—è—è –Ω–µ–∂–Ω–æ—Å—Ç—å", "–ü–æ—à–ª–∏ –º–Ω–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–∂–µ–ª–∞–Ω–∏–µ–º –¥–æ–±—Ä–æ–≥–æ —É—Ç—Ä–∞ üåÖ"],
                ["–°–µ–ª—Ñ–∏ —Å —É–ª—ã–±–∫–æ–π", "–°–¥–µ–ª–∞–π —Å–µ–ª—Ñ–∏ —Å —Å–∞–º–æ–π –∫—Ä–∞—Å–∏–≤–æ–π —É–ª—ã–±–∫–æ–π –∏ –ø—Ä–∏—à–ª–∏ –º–Ω–µ üòä"]
            ]
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
            loadSavedData();
            updateDisplay();
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤
        function handleFileSelect(event) {
            const files = event.target.files;
            console.log('–í—ã–±—Ä–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:', files.length);
            
            if (files.length === 0) {
                showMessage('–§–∞–π–ª—ã –Ω–µ –≤—ã–±—Ä–∞–Ω—ã', 'error');
                return;
            }

            currentFiles = Array.from(files);
            displayPreview();
            showMessage(`–í—ã–±—Ä–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: ${files.length}`, 'success');
        }

        // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
        function selectFiles(accept) {
            const input = document.createElement('input');
            input.type = 'file';
            input.multiple = true;
            input.accept = accept;
            
            input.onchange = function(e) {
                handleFileSelect(e);
            };
            
            input.click();
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é
        function displayPreview() {
            const preview = document.getElementById('filePreview');
            preview.innerHTML = '';

            if (currentFiles.length === 0) return;

            currentFiles.forEach((file, index) => {
                const div = document.createElement('div');
                div.style.display = 'inline-block';
                div.style.margin = '10px';
                div.style.textAlign = 'center';

                if (file.type.startsWith('image/')) {
                    const img = document.createElement('img');
                    img.src = URL.createObjectURL(file);
                    div.appendChild(img);
                } else if (file.type.startsWith('video/')) {
                    const video = document.createElement('video');
                    video.src = URL.createObjectURL(file);
                    video.controls = true;
                    div.appendChild(video);
                }

                const name = document.createElement('p');
                name.textContent = file.name;
                name.style.fontSize = '0.8rem';
                name.style.marginTop = '5px';
                div.appendChild(name);

                preview.appendChild(div);
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥–∞–ª–µ—Ä–µ—é
        function addToGallery() {
            const title = document.getElementById('title').value.trim();
            const description = document.getElementById('description').value.trim();

            if (!title || !description) {
                showMessage('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ', 'error');
                return;
            }

            if (currentFiles.length === 0) {
                showMessage('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã', 'error');
                return;
            }

            currentFiles.forEach(file => {
                const type = file.type.startsWith('image/') ? 'photo' : 'video';
                const photoCount = galleryItems.filter(item => item.type === 'photo').length + 1;
                const videoCount = galleryItems.filter(item => item.type === 'video').length + 1;
                
                const fileName = type === 'photo' ? 
                    `photo${photoCount}.${file.name.split('.').pop()}` : 
                    `video${videoCount}`;

                const item = {
                    type: type,
                    fileName: fileName,
                    title: title,
                    description: description,
                    originalName: file.name
                };

                galleryItems.push(item);
                mediaFiles.set(fileName, file);
            });

            // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
            document.getElementById('title').value = '';
            document.getElementById('description').value = '';
            clearFiles();

            updateDisplay();
            saveData();
            showMessage('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –≥–∞–ª–µ—Ä–µ—é!', 'success');
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
        function clearFiles() {
            currentFiles = [];
            document.getElementById('fileInput').value = '';
            document.getElementById('filePreview').innerHTML = '';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            const list = document.getElementById('galleryList');
            list.innerHTML = '';

            if (galleryItems.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: #666;">–ü–æ–∫–∞ –Ω–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤</p>';
                return;
            }

            galleryItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'gallery-item';
                div.innerHTML = `
                    <h4>${item.title}</h4>
                    <p><strong>–¢–∏–ø:</strong> ${item.type === 'photo' ? 'üì∑ –§–æ—Ç–æ' : 'üé¨ –í–∏–¥–µ–æ'}</p>
                    <p><strong>–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª:</strong> ${item.originalName}</p>
                    <p><strong>–ò–º—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:</strong> <code>${item.fileName}</code></p>
                    <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${item.description}</p>
                    <button class="btn btn-danger" onclick="removeItem(${index})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                `;
                list.appendChild(div);
            });
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
        function removeItem(index) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç?')) {
                const item = galleryItems[index];
                mediaFiles.delete(item.fileName);
                galleryItems.splice(index, 1);
                updateDisplay();
                saveData();
                showMessage('–≠–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω', 'success');
            }
        }

        // –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(text, type) {
            const messages = document.getElementById('messages');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = text;
            messages.appendChild(div);

            setTimeout(() => {
                div.remove();
            }, 5000);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        function saveData() {
            try {
                localStorage.setItem('gallery_data', JSON.stringify(galleryItems));
                console.log('–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', e);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function loadSavedData() {
            try {
                const saved = localStorage.getItem('gallery_data');
                if (saved) {
                    galleryItems = JSON.parse(saved);
                    console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', galleryItems.length, '—ç–ª–µ–º–µ–Ω—Ç–æ–≤');
                }
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
            }
        }

        // –≠–∫—Å–ø–æ—Ä—Ç GalleryConfig.java
        function exportGalleryConfig() {
            let javaCode = `package com.napominalochka.app.config;

public class GalleryConfig {
    
    public static final String[][] GALLERY_ITEMS = {
`;

            galleryItems.forEach((item, index) => {
                const comma = index < galleryItems.length - 1 ? ',' : '';
                javaCode += `        {"${item.type}", "${item.fileName}", "${item.title.replace(/"/g, '\\"')}", "${item.description.replace(/"/g, '\\"')}"}${comma}\n`;
            });

            javaCode += `    };
    
    public static boolean isVideo(String[] item) {
        return "video".equals(item[0]);
    }
    
    public static String getFileName(String[] item) {
        return item[1];
    }
    
    public static String getTitle(String[] item) {
        return item[2];
    }
    
    public static String getDescription(String[] item) {
        return item[3];
    }
}`;

            downloadFile('GalleryConfig.java', javaCode);
            showMessage('GalleryConfig.java —Å–∫–∞—á–∞–Ω!', 'success');
        }

        // –≠–∫—Å–ø–æ—Ä—Ç AppTexts.java
        function exportAppTexts() {
            let javaCode = `package com.napominalochka.app.config;

public class AppTexts {
    
    public static final String SECRET_CODE = "–õ–Æ–ë–û–í–¨";
    
    public static final String[] LOVE_MESSAGES = {
`;

            appTexts.loveMessages.forEach((msg, index) => {
                const comma = index < appTexts.loveMessages.length - 1 ? ',' : '';
                javaCode += `        "${msg.replace(/"/g, '\\"')}"${comma}\n`;
            });

            javaCode += `    };
    
    public static final String[][] MISSIONS = {
`;

            appTexts.missions.forEach((mission, index) => {
                const comma = index < appTexts.missions.length - 1 ? ',' : '';
                javaCode += `        {"${mission[0].replace(/"/g, '\\"')}", "${mission[1].replace(/"/g, '\\"')}"}${comma}\n`;
            });

            javaCode += `    };
}`;

            downloadFile('AppTexts.java', javaCode);
            showMessage('AppTexts.java —Å–∫–∞—á–∞–Ω!', 'success');
        }

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
        function downloadFile(filename, content) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        // –¢–µ—Å—Ç –±—Ä–∞—É–∑–µ—Ä–∞
        function testBrowser() {
            const results = [];
            results.push(`–ë—Ä–∞—É–∑–µ—Ä: ${navigator.userAgent}`);
            results.push(`File API: ${typeof File !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            results.push(`FileReader: ${typeof FileReader !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            results.push(`URL.createObjectURL: ${typeof URL !== 'undefined' && typeof URL.createObjectURL === 'function' ? '‚úÖ' : '‚ùå'}`);
            results.push(`LocalStorage: ${typeof Storage !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            results.push(`–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${isMobile ? '‚úÖ' : '‚ùå'}`);

            alert('–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞:\n\n' + results.join('\n'));
        }
    </script>
</body>
</html>